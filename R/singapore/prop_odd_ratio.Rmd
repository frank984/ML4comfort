---
title: "Proportional odds ratio"
output: html_document
date: "2024-03-06"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data loading

```{r}
load("df_train.Rdata")
#names(df_train)
```


## Data cleaning

Let us consider only relevant variables

```{r}
y=df_train$q_thermal_preference
y=as.ordered(y)
X=df_train[,c(3:7,8:12,16,21,49,51,53,57)]
```

Below, a brief description of each variable

```{r}
names(X)
```

- $\texttt{air_temp}$ (°C);
- $\texttt{rainfall}$ (mm);
- $\texttt{relative_humidity}$ (%);
- $\texttt{wind_speed}$ (knots);
- $\texttt{wind_dir}$ (°);
- $\texttt{ts_stand_time}$ (min);
- $\texttt{ts_step_count}$ (number of steps);
- $\texttt{ts_walking_distance}$ (m);
- $\texttt{ts_heart_rate}$ (beats per minute);
- $\texttt{ts_audio_exposure_environment}$ (dB);
- $\texttt{q_location}$ response to micro-survey question "Where are you?";
- $\texttt{q_noise_nearby}$ response to micro-survey question "Noise distractions nearby?";
- $\texttt{Green.View.Mean}$ GVF;
- $\texttt{Sky.View.Mean}$ SVF;
- $\texttt{Building.View.Mean}$ Building View Factor;
- $\texttt{Visual.Complexity.Mean}$ Visual Complexity Index.

Response variable: thermal preference. It is an ordinal variables 

```{r}
class(y)
```


with the following levels

```{r}
head(y)
```

Summary statistics of the response variable

```{r}
summary(y)
barplot(table(y)/length(y),col=rainbow(length(unique(y))))
```

Summary statistics of the explanatory variables

```{r}
summary(X)
dim(X)
```

```{r}
library(MASS)
dat=X
dat$y=y
head(dat$y)
fit=polr(y~.,data=dat)
summary(fit)
```

